{
  "name": "react-on-rails",
  "version": "6.5.0",
  "description": "react-on-rails JavaScript for react_on_rails Ruby gem",
  "main": "node_package/lib/ReactOnRails.js",
  "directories": {
    "doc": "docs"
  },
  "devDependencies": {
    "babel-cli": "^6.18.0",
    "babel-core": "^6.21.0",
    "babel-loader": "^6.2.10",
    "babel-plugin-react-transform": "^2.0.2",
    "babel-plugin-transform-flow-strip-types": "^6.21.0",
    "babel-plugin-transform-runtime": "^6.15.0",
    "babel-preset-es2015": "^6.18.0",
    "babel-preset-react": "^6.16.0",
    "babel-preset-stage-0": "^6.16.0",
    "babel-runtime": "^6.20.0",
    "babel-tape-runner": "^2.0.1",
    "babel-types": "^6.21.0",
    "babelify": "^7.3.0",
    "blue-tape": "^1.0.0",
    "eslint": "^3.12.2",
    "eslint-config-shakacode": "^13.2.1",
    "eslint-plugin-import": "^2.2.0",
    "eslint-plugin-jsx-a11y": "^3.0.2",
    "eslint-plugin-react": "^6.8.0",
    "flow-bin": "^0.37.4",
    "jsdom": "^9.9.1",
    "react": "^15.4.1",
    "react-dom": "^15.4.1",
    "react-transform-hmr": "^1.0.4",
    "redux": "^3.6.0",
    "release-it": "^2.5.3",
    "tap-spec": "^4.1.1",
    "tape": "^4.6.3",
    "webpack": "^1.14.0"
  },
  "peerDependencies": {
    "react": ">= 0.14",
    "react-dom": ">= 0.14",
    "babel-runtime": ">= 6"
  },
  "files": [
    "node_package/lib"
  ],
  "scripts": {
    "test": "babel-tape-runner -r node_package/tests/helpers/test_helper.js node_package/tests/*.js | tap-spec",
    "clean": "rm -rf node_package/lib",
    "prepublish": "npm run build",
    "babel": "babel --out-dir node_package/lib node_package/src",
    "build": "npm run clean && npm run babel",
    "build-watch": "babel --watch --out-dir node_package/lib node_package/src",
    "eslint": "eslint .",
    "flow": "flow check node_package",
    "lint": "npm run eslint",
    "check": "npm run lint && npm run flow && npm run test",
    "prerelease": "npm run check && npm run clean && npm run build",
    "release:patch": "node_package/scripts/release patch",
    "release:minor": "node_package/scripts/release minor",
    "release:major": "node_package/scripts/release major",
    "dummy:install": "rake dummy_apps",
    "dummy:spec": "rake run_rspec:dummy",
    "local": "echo 'Be sure to run npm run dummy:install' && npm run build && cd spec/dummy && foreman start"
  },
  "repository": {
    "type": "git",
    "url": "git+https://github.com/shakacode/react_on_rails.git"
  },
  "keywords": [
    "react",
    "webpack",
    "JavaScript",
    "Ruby",
    "on",
    "Rails"
  ],
  "author": {
    "name": "justin.gordon@gmail.com"
  },
  "license": "MIT",
  "bugs": {
    "url": "https://github.com/shakacode/react_on_rails/issues"
  },
  "homepage": "https://github.com/shakacode/react_on_rails#readme",
  "readme": "[![Build Status](https://travis-ci.org/shakacode/react_on_rails.svg?branch=master)](https://travis-ci.org/shakacode/react_on_rails) [![Codeship Status for shakacode/react_on_rails](https://app.codeship.com/projects/cec6c040-971f-0134-488f-0a5146246bd8/status?branch=master)](https://app.codeship.com/projects/187011) [![Dependency Status](https://gemnasium.com/shakacode/react_on_rails.svg)](https://gemnasium.com/shakacode/react_on_rails) [![Gem Version](https://badge.fury.io/rb/react_on_rails.svg)](https://badge.fury.io/rb/react_on_rails) [![npm version](https://badge.fury.io/js/react-on-rails.svg)](https://badge.fury.io/js/react-on-rails) [![Code Climate](https://codeclimate.com/github/shakacode/react_on_rails/badges/gpa.svg)](https://codeclimate.com/github/shakacode/react_on_rails) [![Coverage Status](https://coveralls.io/repos/shakacode/react_on_rails/badge.svg?branch=master&service=github)](https://coveralls.io/github/shakacode/react_on_rails?branch=master)\n\n**For a complete example of this gem, see our live demo at [www.reactrails.com](http://www.reactrails.com). ([Source Code](https://github.com/shakacode/react-webpack-rails-tutorial))**\n\nAloha from Justin Gordon ([bio](http://www.railsonmaui.com/about)) and the [ShakaCode](http://www.shakacode.com) Team! We're actively looking for new projects involving React, React-Native, and Rails. Please [contact me](mailto:justin@shakacode.com) if we could potentially help you in any way. Besides consulting on bigger projects, [ShakaCode](http://www.shakacode.com) is doing ScreenHero plus Slack/Github based coaching for React on Rails. See our blog post [Can ShakaCode Help You?](https://blog.shakacode.com/can-shakacode-help-you-4a5b1e5a8a63#.jex6tg9w9) for more information. \n\nI'm offering a free half-hour project consultation, on anything from React on Rails to any aspect of web application development for both consumer and enterprise products. In addition to React.js and Rails, we're doing React-Native iOS and Android apps!\n\nWhether you have a new project or need help on an existing project, feel free to contact me directly at [justin@shakacode.com](mailto:justin@shakacode.com) and thanks in advance for any referrals!\n\nYour support keeps this project going!\n\n(Want to become a contributor? [Contact us](mailto:contact@shakacode.com) for a Slack room invite and let us know that you want to contribute.)\n\n# Community\nPlease [Subscribe](https://app.mailerlite.com/webforms/landing/l1d9x5) to keep in touch with Justin Gordon and [ShakaCode](http://www.shakacode.com/). I intend to send a monthly summary including announcements of new releases of React on Rails and of our latest [blog articles](https://blog.shakacode.com) and tutorials. Subscribers will also have access to **exclusive content**, including tips and examples.\n\n[![2017-01-31_14-16-56](https://cloud.githubusercontent.com/assets/1118459/22490211/f7a70418-e7bf-11e6-9bef-b3ccd715dbf8.png)](https://app.mailerlite.com/webforms/landing/l1d9x5)\n\n* **Slack Room**: [Contact us](mailto:contact@shakacode.com) for an invite to the ShakaCode Slack room!\n* **[forum.shakacode.com](https://forum.shakacode.com)**: Post your questions\n* **[@ShakaCode on Twitter](https://twitter.com/shakacode)**\n\n# Testimonials\nFrom Joel Hooks, Co-Founder, Chief Nerd at [egghead.io](https://egghead.io/), January 30, 2017: \n![2017-01-30_11-33-59](https://cloud.githubusercontent.com/assets/1118459/22443635/b3549fb4-e6e3-11e6-8ea2-6f589dc93ed3.png)\n\nFor more testimonials, see [Live Projects](PROJECTS.md) and [Kudos](./KUDOS.md).\n\n# Articles, Videos, and Podcasts\n\n### Articles\n\n* [React on Rails, 2000+ ðŸŒŸ Stars](https://medium.com/shakacode/react-on-rails-2000-stars-32ff5cfacfbf#.6gmfb2gpy)\n* [The React on Rails Doctrine](https://medium.com/@railsonmaui/the-react-on-rails-doctrine-3c59a778c724)\n\n### Videos \n\n1. [egghead.io: Creating a component with React on Rails](https://egghead.io/lessons/react-creating-a-component-with-react-on-rails)\n1. [egghead.io: Creating a redux component with React on Rails](https://egghead.io/lessons/react-add-redux-state-management-to-a-react-on-rails-project)\n1. [React On Rails Tutorial Series](https://www.youtube.com/playlist?list=PL5VAKH-U1M6dj84BApfUtvBjvF-0-JfEU)\n  1. [History and Motivation](https://youtu.be/F4oymbUHvoY)\n  1. [Basic Tutorial Walkthrough](https://youtu.be/_bjScw60FBk)\n  1. [Code Walkthrough](https://youtu.be/McQ9UM-_ocQ)\n\n### Podcasts\n* [284 Ruby Rogues: React on Rails with Justin Gordon and Rob Wise](https://devchat.tv/ruby-rogues/284-rr-react-on-rails-with-justin-gordon-and-rob-wise)\n\n# NEWS\n* 2016-11-03: Spoke at [LA Ruby: \"React on Rails: Why, What, and How?\"](http://www.meetup.com/laruby/events/234825187/). [Video and pictures in this article](https://blog.shakacode.com/my-react-on-rails-talk-at-the-la-ruby-rails-meetup-november-10-2016-eaaa83aff800#.ej6h4eglp).\n* *See [NEWS.md](NEWS.md) for more notes over time.*\n\n# React on Rails\n\n**Project Objective**: To provide an opinionated and optimal framework for integrating Ruby on Rails with modern JavaScript tooling and libraries, including [**Webpack**](http://webpack.github.io/), [**Babel**](https://babeljs.io/), [**React**](https://facebook.github.io/react/), [**Redux**](https://github.com/reactjs/redux), [**React-Router**](https://github.com/reactjs/react-router). This differs significantly from typical Rails architecture. When considering what goes into **react_on_rails**, we ask ourselves, is the functionality related to the intersection of using Rails and modern JavaScript? If so, then the functionality belongs right here. In other cases, we're releasing separate npm packages or Ruby gems. If you are interested in implementing React using traditional Rails architecture, see [react-rails](https://github.com/reactjs/react-rails).\n\nReact on Rails integrates Facebook's [React](https://github.com/facebook/react) front-end framework with Rails. React v0.14.x and greater is supported, with server rendering. [Redux](https://github.com/reactjs/redux) and [React-Router](https://github.com/reactjs/react-redux) are supported as well, also with server rendering, using either **execJS** or a [Node.js server](https://github.com/shakacode/react_on_rails/blob/master/docs%2Fadditional-reading%2Fnode-server-rendering.md). See the Rails on Maui [blog post](http://www.railsonmaui.com/blog/2014/10/03/integrating-webpack-and-the-es6-transpiler-into-an-existing-rails-project/) that started it all!\n\n## Table of Contents\n\n+ [Features](#features)\n+ [Why Webpack?](#why-webpack)\n+ [Getting Started](#getting-started)\n    - [Installation Summary](#installation-summary)\n    - [Initializer Configuration: config/initializers/react_on_rails.rb](#initializer-configuration)\n    - [Including your React Component in your Rails Views](#including-your-react-component-in-your-rails-views)\n    - [I18n](#i18n)\n+ [How it Works](#how-it-works)\n    - [Client-Side Rendering vs. Server-Side Rendering](#client-side-rendering-vs-server-side-rendering)\n    - [Building the Bundles](#building-the-bundles)\n    - [Rails Context](#rails-context)\n    - [Globally Exposing Your React Components](#globally-exposing-your-react-components)\n    - [ReactOnRails View Helpers API](#reactonrails-view-helpers-api)\n    - [ReactOnRails JavaScript API](#reactonrails-javascript-api)\n    - [React-Router](#react-router)\n    - [Deployment](#deployment)\n+ [Integration with Node](#integration-with-node)\n+ [Additional Documentation](#additional-documentation)\n+ [Contributing](#contributing)\n+ [License](#license)\n+ [Authors](#authors)\n+ [About ShakaCode](#about-shakacode)\n\n---\n\n## Features\nLike the [react-rails](https://github.com/reactjs/react-rails) gem, React on Rails is capable of server-side rendering with fragment caching and is compatible with [turbolinks](https://github.com/turbolinks/turbolinks). Unlike react-rails, which depends heavily on sprockets and jquery-ujs, React on Rails uses [webpack](http://webpack.github.io/) and does not depend on jQuery. While the initial setup is slightly more involved, it allows for advanced functionality such as:\n\n+ [Redux](https://github.com/reactjs/redux)\n+ [Webpack optimization functionality](https://github.com/webpack/docs/wiki/optimization)\n+ [React Router](https://github.com/reactjs/react-router)\n\nSee the [react-webpack-rails-tutorial](https://github.com/shakacode/react-webpack-rails-tutorial) for an example of a live implementation and code.\n\n## Why Webpack?\n\nWebpack is used to generate several JavaScript \"bundles\" for inclusion in `application.js` or directly in your layout.\n\nThis usage of webpack fits neatly and simply into the existing Rails sprockets system and you can include React components on a Rails view with a simple helper.\n\nCompare this to some alternative approaches for SPAs (Single Page Apps) that utilize Webpack and Rails. They will use a separate node server to distribute web pages, JavaScript assets, CSS, etc., and will still use Rails as an API server. A good example of this is our ShakaCode team member Alex's article [\nUniversal React with Rails: Part I](https://medium.com/@alexfedoseev/isomorphic-react-with-rails-part-i-440754e82a59).\n\nWe're definitely not doing that. With react_on_rails, webpack is mainly generating a nice JavaScript file for inclusion into `application.js`. We're going to KISS. And that's all relative given how much there is to get right in an enterprise class web application.\n\n## Getting Started\n\n**For more detailed instructions**, see the [React on Rails Basic Tutorial](docs/tutorial.md).\n\n1. Add the following to your Gemfile and `bundle install`.\n\n  ```ruby\n  gem \"react_on_rails\", \"~> 6\"\n  ```\n\n2. Commit this to git (you cannot run the generator unless you do this).\n\n3. See help for the generator:\n\n  ```bash\n  rails generate react_on_rails:install --help\n  ```\n\n4. Run the generator with a simple \"Hello World\" example (more options below):\n\n  ```bash\n  rails generate react_on_rails:install\n  ```\n\n5. Bundle and NPM install. Make sure you are on a recent version of node. Please use at least Node v5. Bundle is for adding execJs. You can remove that if you are sure you will not server render.\n\n  ```bash\n  bundle && npm install\n  ```\n\n6. Ensure that you have `foreman` installed: `gem install foreman`.\n\n7. Start your Rails server:\n\n  ```bash\n  foreman start -f Procfile.dev\n  ```\n\n7. Visit [localhost:3000/hello_world](http://localhost:3000/hello_world)\n\n### Installation Summary\n\nSee the [Installation Overview](docs/basics/installation-overview.md) for a concise set summary of what's in a React on Rails installation.\n\n### Initializer Configuration\n\nConfigure the `config/initializers/react_on_rails.rb`. You can adjust some necessary settings and defaults. See file [spec/dummy/config/initializers/react_on_rails.rb](https://github.com/shakacode/react_on_rails/tree/master/spec/dummy/config/initializers/react_on_rails.rb) for a detailed example of configuration, including comments on the different values to configure.\n\n### Including your React Component in your Rails Views\n\n+ *Normal Mode (React component will be rendered on client):*\n\n  ```erb\n  <%= react_component(\"HelloWorldApp\", props: @some_props) %>\n  ```\n+ *Server-Side Rendering (React component is first rendered into HTML on the server):*\n\n  ```erb\n  <%= react_component(\"HelloWorldApp\", props: @some_props, prerender: true) %>\n  ```\n\n+ The `component_name` parameter is a string matching the name you used to expose your React component globally. So, in the above examples, if you had a React component named \"HelloWorldApp,\" you would register it with the following lines:\n\n  ```js\n  import ReactOnRails from 'react-on-rails';\n  import HelloWorldApp from './HelloWorldApp';\n  ReactOnRails.register({ HelloWorldApp });\n  ```\n\n  Exposing your component in this way is how React on Rails is able to reference your component from a Rails view. You can expose as many components as you like, as long as their names do not collide. See below for the details of how you expose your components via the react_on_rails webpack configuration.\n\n+ `@some_props` can be either a hash or JSON string. This is an optional argument assuming you do not need to pass any options (if you want to pass options, such as `prerender: true`, but you do not want to pass any properties, simply pass an empty hash `{}`). This will make the data available in your component:\n\n  ```ruby\n    # Rails View\n    <%= react_component(\"HelloWorldApp\", props: { name: \"Stranger\" }) %>\n  ```\n\n  ```javascript\n    // inside your React component\n    this.props.name // \"Stranger\"\n  ```\n\n### I18n\n\nYou can enable the i18n functionality with [react-intl](https://github.com/yahoo/react-intl).\n\nReact on Rails provides an option for automatic conversions of Rails `*.yml` locale files into `*.js` files for `react-intl`.\n\nSee the [How to add I18n](docs/basics/i18n.md) for a summary of adding I18n.\n\n## NPM\nAll JavaScript in React On Rails is loaded from npm: [react-on-rails](https://www.npmjs.com/package/react-on-rails). To manually install this (you did not use the generator), assuming you have a standard configuration, run this command:\n\n```\ncd client && npm i --saveDev react-on-rails\n```\n\nThat will install the latest version and update your package.json.\n\n## How it Works\nThe generator installs your webpack files in the `client` folder. Foreman uses webpack to compile your code and output the bundled results to `app/assets/webpack`, which are then loaded by sprockets. These generated bundle files have been added to your `.gitignore` for your convenience.\n\nInside your Rails views, you can now use the `react_component` helper method provided by React on Rails. You can pass props directly to the react component helper. You can also initialize a Redux store with view or controller helper `redux_store` so that the store can be shared amongst multiple React components. See the docs for `redux_store` below and scan the code inside of the [/spec/dummy](https://github.com/shakacode/react_on_rails/tree/master/spec/dummy) sample app.\n\n### Client-Side Rendering vs. Server-Side Rendering\nIn most cases, you should use the `prerender: false` (default behavior) with the provided helper method to render the React component from your Rails views. In some cases, such as when SEO is vital, or many users will not have JavaScript enabled, you can enable server-rendering by passing `prerender: true` to your helper, or you can simply change the default in `config/initializers/react_on_rails`.\n\nNow the server will interpret your JavaScript using [ExecJS](https://github.com/rails/execjs) and pass the resulting HTML to the client. We recommend using [mini_racer](https://github.com/discourse/mini_racer) as ExecJS's runtime. The generator will automatically add it to your Gemfile for you (once we complete [#501](https://github.com/shakacode/react_on_rails/issues/501)).\n\nIn the following screenshot you can see the 3 parts of React on Rails rendering:\n\n1. A hidden HTML div that contains the properties of the React component, such as the registered name and any props. A JavaScript function runs after the page loads to convert take this data and build initialize React components.\n2. The wrapper div `<div id=\"HelloWorld-react-component-0\">` specifies the div where to place the React rendering. It encloses the server-rendered HTML for the React component\n3. Additional JavaScript is placed to console log any messages, such as server rendering errors. Note, these server side logs can be configured to only be sent to the server logs.\n\n**Note**: If server rendering is not used (prerender: false), then the major difference is that the HTML rendered for the React component only contains the outer div: `<div id=\"HelloWorld-react-component-0\"/>`. The first specification of the React component is just the same.\n\n![Comparison of a normal React Component with its server-rendered version](https://cloud.githubusercontent.com/assets/1118459/12607542/a959d5c8-c48a-11e5-8187-2433d543ccaa.png)\n\n### Building the Bundles\nEach time you change your client code, you will need to re-generate the bundles (the webpack-created JavaScript files included in application.js). The included Foreman `Procfile.dev` will take care of this for you by watching your JavaScript code files for changes. Simply run `foreman start -f Procfile.dev`.\n\nOn production deployments that use asset precompilation, such as Heroku deployments, React on Rails, by default, will automatically run webpack to build your JavaScript bundles. You can see the source code for what gets added to your precompilation [here](https://github.com/shakacode/react_on_rails/tree/master/lib/tasks/assets.rake). For more information on this topic, see [the doc on Heroku deployment](https://github.com/shakacode/react_on_rails/tree/master/docs/additional-reading/heroku-deployment.md#more-details-on-precompilation-using-webpack-to-create-javascript-assets).\n\nIf you have used the provided generator, these bundles will automatically be added to your `.gitignore` to prevent extraneous noise from re-generated code in your pull requests. You will want to do this manually if you do not use the provided generator.\n\n### Rails Context\nWhen you use a \"generator function\" to create react components (or renderedHtml on the server) or you used shared redux stores, you get 2 params passed to your function:\n\n1. Props that you pass in the view helper of either `react_component` or `redux_store`\n2. Rails contextual information, such as the current pathname. You can customize this in your config file.\n\nThis information (`props` and `railsContext`) should be the same regardless of either client or server side rendering.\n\nWhile you could manually pass the `railsContext` information in as \"props\", the `rails_context` is a convenience because it's passed consistently to all invocations of generator functions.\n\nSo if you register your generator function `MyAppComponent`, it will get called like:\n\n```js\nreactComponent = MyAppComponent(props, railsContext);\n```\nand for a store:\n\n```js\nreduxStore = MyReduxStore(props, railsContext);\n```\n\nNote, you never make these calls. This is what React on Rails does when either server or client rendering. You'll be defining functions that take these params and return a React component or a Redux Store.\n\n(Note, see below [section](#multiple-react-components-on-a-page-with-one-store) on how to setup redux stores that allow multiple components to talk to the same store.)\n\nThe `railsContext` has: (see implementation in file [react_on_rails_helper.rb](https://github.com/shakacode/react_on_rails/tree/master/app/helpers/react_on_rails_helper.rb), method `rails_context` for the definitive list).\n\n```ruby\n  {\n    # URL settings\n    href: request.original_url,\n    location: \"#{uri.path}#{uri.query.present? ? \"?#{uri.query}\": \"\"}\",\n    scheme: uri.scheme, # http\n    host: uri.host, # foo.com\n    port: uri.port,\n    pathname: uri.path, # /posts\n    search: uri.query, # id=30&limit=5\n\n    # Other\n    serverSide: boolean # Are we being called on the server or client? NOTE, if you conditionally\n     # render something different on the server than the client, then React will only show the\n     # server version!\n  }\n```\n\n#### Use Cases\n##### Needing the current url path for server rendering\nSuppose you want to display a nav bar with the current navigation link highlighted by the URL. When you server render the code, you will need to know the current URL/path if that is what you want your logic to be based on. The new `railsContext` has this information so the application of an \"active\" class can be done server side.\n\n##### Configuring different code for server side rendering\nSuppose you want to turn off animation when doing server side rendering. The `serverSide` value is just what you need.\n\n#### Customization of the rails_context\nYou can customize the values passed in the `railsContext` in your `config/initializers/react_on_rails.rb`. Here's how.\n\nSet the config value for the `rendering_extension`:\n\n```ruby\n  config.rendering_extension = RenderingExtension\n```\n\nImplement it like this above in the same file. Create a class method on the module called `custom_context` that takes the `view_context` for a param.\n\nSee [spec/dummy/config/initializers/react_on_rails.rb](https://github.com/shakacode/react_on_rails/tree/master/spec/dummy/config/initializers/react_on_rails.rb) for a detailed example.\n\n```ruby\nmodule RenderingExtension\n\n  # Return a Hash that contains custom values from the view context that will get merged with\n  # the standard rails_context values and passed to all calls to generator functions used by the\n  # react_component and redux_store view helpers\n  def self.custom_context(view_context)\n    {\n     somethingUseful: view_context.session[:something_useful]\n    }\n  end\nend\n```\n\nIn this case, a prop and value for `somethingUseful` will go into the railsContext passed to all react_component and redux_store calls. You may set any values available in the view rendering context.\n\n### Globally Exposing Your React Components\nPlace your JavaScript code inside of the provided `client/app` folder. Use modules just as you would when using webpack alone. The difference here is that instead of mounting React components directly to an element using `React.render`, you **expose your components globally and then mount them with helpers inside of your Rails views**.\n\nThis is an example of how to expose a component to the `react_component` view helper.\n\n  ```javascript\n  // client/app/bundles/HelloWorld/startup/HelloWorldApp.jsx\n  import HelloWorld from '../components/HelloWorld';\n  import ReactOnRails from 'react-on-rails';\n  ReactOnRails.register({ HelloWorld });\n  ```\n\n#### Different Server-Side Rendering Code (and a Server Specific Bundle)\n\nYou may want different initialization for your server rendered components. For example, if you have animation that runs when a component is displayed, you might need to turn that off when server rendering. However, the `railsContext` will tell you if your JavaScript code is running client side or server side. So code that required a different server bundle previously may no longer require this!\n\nIf you do want different code to run, you'd setup a separate webpack compilation file and you'd specify a different, server side entry file. ex. 'serverHelloWorldApp.jsx'. Note, you might be initializing HelloWorld with version specialized for server rendering.\n\n#### Generator Functions\nWhy would you create a function that returns a React component? For example, you may want the ability to use the passed-in props to initialize a redux store or setup react-router. Or you may want to return different components depending on what's in the props. ReactOnRails will automatically detect a registered generator function.\n\nAnother reason to user a generator function is that sometimes in server rendering, specifically with React Router, you need to return the result of calling ReactDOMServer.renderToString(element). You can do this by returning an object with the following shape: { renderedHtml, redirectLocation, error }.\n\n#### Renderer Functions\nA renderer function is a generator function that accepts three arguments: `(props, railsContext, domNodeId) => { ... }`. Instead of returning a React component, a renderer is responsible for calling `ReactDOM.render` to manually render a React component into the dom. Why would you want to call `ReactDOM.render` yourself? One possible use case is [code splitting](docs/additional-reading/code-splitting.md).\n\nRenderer functions are not meant to be used on the server, since there's no DOM on the server. Instead, use a generator function. Attempting to server render with a renderer function will cause an error.\n\n## ReactOnRails View Helpers API\nOnce the bundled files have been generated in your `app/assets/webpack` folder and you have exposed your components globally, you will want to run your code in your Rails views using the included helper method.\n\nThis is how you actually render the React components you exposed to `window` inside of `clientRegistration` (and `global` inside of `serverRegistration` if you are server rendering).\n\n### react_component\n```ruby\nreact_component(component_name,\n                props: {},\n                prerender: nil,\n                trace: nil,\n                replay_console: nil,\n                raise_on_prerender_error: nil,\n                id: nil,\n                html_options: {})\n```\n\n+ **component_name:** Can be a React component, created using a ES6 class, or `React.createClass`, a generator function that returns a React component (or only on the server side, an object with shape { redirectLocation, error, renderedHtml }), or a renderer function that manually renders a React component to the dom (client side only).\n+ **options:**\n  + **props:** Ruby Hash which contains the properties to pass to the react object, or a JSON string. If you pass a string, we'll escape it for you.\n  + **prerender:** enable server-side rendering of component. Set to false when debugging!\n  + **id:** Id for the div, will be used to attach the React component. This will get assigned automatically if you do not provide an id. Must be unique.\n  + **html_options:** Any other html options to get placed on the added div for the component. For example, you can set a class (or inline style) on the outer div so that it behaves like a span, with styling of `display:inline-block`.\n  + **trace:** set to true to print additional debugging information in the browser. Defaults to true for development, off otherwise. Note, on the client you will so both the railsContext and your props. On the server, you only see the railsContext being logged.\n  + **replay_console:** Default is true. False will disable echoing server-rendering logs to the browser. While this can make troubleshooting server rendering difficult, so long as you have the default configuration of logging_on_server set to true, you'll still see the errors on the server.\n  + **raise_on_prerender_error:** Default is false. True will throw an error on the server side rendering. Your controller will have to handle the error.\n\n### redux_store\n#### Controller Extension\nInclude the module ReactOnRails::Controller in your controller, probably in ApplicationController. This will provide the following controller method, which you can call in your controller actions:\n\n`redux_store(store_name, props: {})`\n\n+ **store_name:** A name for the store. You'll refer to this name in 2 places in your JavaScript:\n  1. You'll call `ReactOnRails.registerStore({storeName})` in the same place that you register your components.\n  2. In your component definition, you'll call `ReactOnRails.getStore('storeName')` to get the hydrated Redux store to attach to your components.\n+ **props:**  Named parameter `props`. ReactOnRails takes care of setting up the hydration of your store with props from the view.\n\nFor an example, see [spec/dummy/app/controllers/pages_controller.rb](https://github.com/shakacode/react_on_rails/tree/master/spec/dummy/app/controllers/pages_controller.rb). Note, this is preferable to using the equivalent view_helper `redux_store` in that you can be assured that the store is initialized before your components.\n\n#### View Helper\n`redux_store(store_name, props: {})`\n\nSame API as the controller extension. **HOWEVER**, we recommend the controller extension instead because the Rails executes the template code in the controller action's view file (`erb`, `haml`, `slim`, etc.) before the layout. So long as you call `redux_store` at the beginning of your action's view file, this will work. However, it's an easy mistake to put this call in the wrong place. Calling `redux_store` in the controller action ensures proper load order, regardless of where you call this in the controller action. Note, you won't know of this subtle ordering issue until you server render and you find that your store is not hydrated properly.\n\n`redux_store_hydration_data`\n\nPlace this view helper (no parameters) at the end of your shared layout. This tell ReactOnRails where to client render the redux store hydration data. Since we're going to be setting up the stores in the controllers, we need to know where on the view to put the client side rendering of this hydration data, which is a hidden div with a matching class that contains a data props. For an example, see [spec/dummy/app/views/layouts/application.html.erb](https://github.com/shakacode/react_on_rails/tree/master/spec/dummy/app/views/layouts/application.html.erb).\n\n#### Redux Store Notes\nNote, you don't need to separately initialize your redux store. However, it's recommended for the two following use cases:\n\n1. You want to have multiple components that access the same store.\n2. You want to place the props to hydrate the client side stores at the very end of your HTML so that the browser can render all earlier HTML first. This is particularly useful if your props will be large.\n\n### server_render_js\n`server_render_js(js_expression, options = {})`\n\n+ js_expression, like 2 + 3, and not a block of js code. If you have more than one line that needs to be executed, wrap it in an [IIFE](https://en.wikipedia.org/wiki/Immediately-invoked_function_expression). JS exceptions will be caught and console messages handled properly\n+ Currently, the only option you may pass is `replay_console` (boolean)\n\nThis is a helper method that takes any JavaScript expression and returns the output from evaluating it. If you have more than one line that needs to be executed, wrap it in an IIFE. JS exceptions will be caught and console messages handled properly.\n\n## Multiple React Components on a Page with One Store\nYou may wish to have 2 React components share the same the Redux store. For example, if your navbar is a React component, you may want it to use the same store as your component in the main area of the page. You may even want multiple React components in the main area, which allows for greater modularity. In addition, you may want this to work with Turbolinks to minimize reloading the JavaScript. A good example of this would be something like a notifications counter in a header. As each notification is read in the body of the page, you would like to update the header. If both the header and body share the same Redux store, then this is trivial. Otherwise, we have to rely on other solutions, such as the header polling the server to see how many unread notifications exist.\n\nSuppose the Redux store is called `appStore`, and you have 3 React components that each needs to connect to a store: `NavbarApp`, `CommentsApp`, and `BlogsApp`. I named them with `App` to indicate that they are the registered components.\n\nYou will need to make a function that can create the store you will be using for all components and register it via the `registerStore` method. Note, this is a **storeCreator**, meaning that it is a function that takes (props, location) and returns a store:\n\n```js\nfunction appStore(props, railsContext) {\n  // Create a hydrated redux store, using props and the railsContext (object with\n  // Rails contextual information).\n  return myAppStore;\n}\n\nReactOnRails.registerStore({\n  appStore\n});\n```\n\nWhen registering your component with React on Rails, you can get the store via `ReactOnRails.getStore`:\n\n```js\n// getStore will initialize the store if not already initialized, so creates or retrieves store\nconst appStore = ReactOnRails.getStore(\"appStore\");\nreturn (\n  <Provider store={appStore}>\n    <CommentsApp />\n  </Provider>\n);\n```\n\nFrom your Rails view, you can use the provided helper `redux_store(store_name, props)` to create a fresh version of the store (because it may already exist if you came from visiting a previous page). Note, for this example, since we're initializing this from the main layout, we're using a generic name of `@react_props`. This means in this case that Rails controllers would set `@react_props` to the properties to hydrate the Redux store.\n\n**app/views/layouts/application.html.erb**\n```erb\n...\n<%= redux_store(\"appStore\", props: @react_props) %>;\n<%= react_component(\"NavbarApp\") %>\nyield\n...\n```\n\nComponents are created as [stateless function(al) components](https://facebook.github.io/react/docs/reusable-components.html#stateless-functions). Since you can pass in initial props via the helper `redux_store`, you do not need to pass any props directly to the component. Instead, the component hydrates by connecting to the store.\n\n**_comments.html.erb**\n```erb\n<%= react_component(\"CommentsApp\") %>\n```\n\n**_blogs.html.erb**\n```erb\n<%= react_component(\"BlogsApp\") %>\n```\n\n*Note:* You will not be doing any partial updates to the Redux store when loading a new page. When the page content loads, React on Rails will rehydrate a new version of the store with whatever props are placed on the page.\n\n## ReactOnRails JavaScript API\nSee [ReactOnRails JavaScript API](docs/api/javascript-api.md).\n\n#### Using Rails built-in CSRF protection in JavaScript\n\nRails has built-in protection for Cross-Site Request Forgery (CSRF), see [Rails Documentation](http://guides.rubyonrails.org/security.html#cross-site-request-forgery-csrf). To nicely utilize this feature in JavaScript requests, React on Rails is offerring two helpers that can be used as following for POST, PUT or DELETE requests:\n\n```js\nimport ReactOnRails from 'react-on-rails';\n\n// reads from DOM csrf token generated by Rails in <%= csrf_meta_tags %>\ncsrfToken = ReactOnRails.authenticityToken();\n\n// compose Rails specific request header as following { X-CSRF-Token: csrfToken, X-Requested-With: XMLHttpRequest }\nheader = ReactOnRails.authenticityHeaders(otherHeader);\n```\n\nIf you are using [jquery-ujs](https://github.com/rails/jquery-ujs) for AJAX calls, then these helpers are not needed because the [jquery-ujs](https://github.com/rails/jquery-ujs) library updates header automatically, see [jquery-ujs documentation](https://robots.thoughtbot.com/a-tour-of-rails-jquery-ujs#cross-site-request-forgery-protection).\n\n## React Router\n[React Router](https://github.com/reactjs/react-router) is supported, including server side rendering! See:\n\n1. [React on Rails docs for react-router](docs/additional-reading/react-router.md)\n1. Examples in [spec/dummy/app/views/react_router](https://github.com/shakacode/react_on_rails/tree/master/spec/dummy/app/views/react_router) and follow to the JavaScript code in the [spec/dummy/client/app/startup/ServerRouterApp.jsx](https://github.com/shakacode/react_on_rails/tree/master/spec/dummy/client/app/startup/ServerRouterApp.jsx).\n1. [Code Splitting docs](docs/additional-reading/code-splitting.md) for information about how to set up code splitting for server rendered routes.\n\n## Deployment\n* Version 6.0 puts the necessary precompile steps automatically in the rake precompile step. You can, however, disable this by setting certain values to nil in the [config/initializers/react_on_rails.rb](https://github.com/shakacode/react_on_rails/tree/master/spec/dummy/config/initializers/react_on_rails.rb).\n  * `config.symlink_non_digested_assets_regex`: Set to nil to turn off the setup of non-js assets.\n  * `npm_build_production_command`: Set to nil to turn off the precompilation of the js assets.\n* See the [Heroku Deployment](docs/additional-reading/heroku-deployment.md) doc for specifics regarding Heroku.\n* If you're using the node server for server rendering, you may want to do your own AWS install. We'll have more docs on this in the future.\n\n## Integration with Node\nNode.js can be used as the backend for server-side rendering instead of [execJS](https://github.com/rails/execjs). Before you try this, consider the tradeoff of extra complexity with your deployments versus *potential* performance gains. We've found that using ExecJS with [mini_racer](https://github.com/discourse/mini_racer) to be \"fast enough\" so far. That being said, we've heard of other large websites using Node.js for better server rendering performance. See [Node.js for Server Rendering](docs/additional-reading/node-server-rendering.md) for more information.\n\n## Additional Documentation \n**Try out our new [Documentation Gitbook](https://shakacode.gitbooks.io/react-on-rails/content/) for improved readability & reference!**\n+ **Rails**\n  + [Rails Assets](docs/additional-reading/rails-assets.md)\n  + [Rails Engine Integration](docs/additional-reading/rails-engine-integration.md)\n  + [Rails View Rendering from Inline JavaScript](docs/additional-reading/rails_view_rendering_from_inline_javascript.md)\n  + [RSpec Configuration](docs/additional-reading/rspec-configuration.md)\n  + [Turbolinks](docs/additional-reading/turbolinks.md)\n\n+ **Javascript**\n  + [Node Dependencies and NPM](docs/additional-reading/node-dependencies-and-npm.md)\n  + [Babel](docs/additional-reading/babel.md)\n  + [React Router](docs/additional-reading/react-router.md)\n  + [React & Redux](docs/additional-reading/react-and-redux.md)\n  + [Webpack](docs/additional-reading/webpack.md)\n  + [Webpack Configuration](docs/additional-reading/webpack.md)\n  + [Webpack Cookbook](https://christianalfoni.github.io/react-webpack-cookbook/index.html)\n  + [Developing with the Webpack Dev Server](docs/additional-reading/webpack-dev-server.md)\n  + [Node Server Rendering](docs/additional-reading/node-server-rendering.md)\n  + [Server Rendering Tips](docs/additional-reading/server-rendering-tips.md)\n  + [Code Splitting](docs/additional-reading/code-splitting.md)\n\n+ **Development**\n  + [React on Rails Basic Installation Tutorial](docs/tutorial.md) ([live demo](https://hello-react-on-rails.herokuapp.com))\n  + [Installation Overview](docs/basics/installation-overview.md)\n  + [Migration from react-rails](docs/basics/migrating-from-react-rails.md)\n  + [Recommended Project Structure](docs/additional-reading/recommended-project-structure.md)\n  + [Generator Tips](docs/basics/generator.md)\n  + [Hot Reloading of Assets For Rails Development](docs/additional-reading/hot-reloading-rails-development.md)\n  + [Heroku Deployment](docs/additional-reading/heroku-deployment.md)\n  + [Updating Dependencies](docs/additional-reading/updating-dependencies.md)\n\n+ **API**\n  + [JavaScript API](docs/api/javascript-api.md)\n  + [Ruby API](docs/api/ruby-api.md)\n  + [Setting up Hot Reloading during Rails Development, API docs](docs/api/ruby-api-hot-reload-view-helpers.md)\n\n+ **[CONTRIBUTING](CONTRIBUTING.md)**\n  + [Generator Testing](docs/contributor-info/generator-testing.md)\n  + [Linting](docs/contributor-info/linters.md)\n  + [Releasing](docs/contributor-info/releasing.md)\n\n+ **Misc**\n  + [Tips](docs/additional-reading/tips.md)\n  + [Changelog](CHANGELOG.md)\n  + [Projects](PROJECTS.md)\n  + [Shaka Code Style](docs/coding-style/style.md)\n  + [React on Rails, Slides](http://www.slideshare.net/justingordon/react-on-rails-v61)\n  + [Code of Conduct](docs/misc/code_of_conduct.md)\n  + [The React on Rails Doctrine](https://medium.com/@railsonmaui/the-react-on-rails-doctrine-3c59a778c724)\n  + [React on Rails, 2000+ ðŸŒŸ Stars](https://medium.com/shakacode/react-on-rails-2000-stars-32ff5cfacfbf#.6gmfb2gpy)\n\n## Demos\n+ [www.reactrails.com](http://www.reactrails.com) with the source at [shakacode/react-webpack-rails-tutorial](https://github.com/shakacode/react-webpack-rails-tutorial/).\n+ [spec app](https://github.com/shakacode/react_on_rails/tree/master/spec/dummy): Great simple examples used for our tests.\n  ```\n  cd spec/dummy\n  bundle && npm i\n  foreman start\n  ```\n\n## Dependencies\n+ Ruby 2.1 or greater\n+ Rails 3.2 or greater\n+ Node 5.5 or greater\n\n## Contributing\nBug reports and pull requests are welcome. This project is intended to be a safe, welcoming space for collaboration, and contributors are expected to adhere to our version of the [Contributor Covenant Code of Conduct](docs/misc/code_of_conduct.md)).\n\nSee [Contributing](CONTRIBUTING.md) to get started.\n\n## License\nThe gem is available as open source under the terms of the [MIT License](docs/LICENSE).\n\n## Authors\n[The Shaka Code team!](http://www.shakacode.com/about/)\n\nThe origins of the project began with the need to do a rich JavaScript interface for ShakaCode's client [Madrone](http://madroneco.com/) and the choice to use Webapck and Rails, as described in [Fast Rich Client Rails Development With Webpack and the ES6 Transpiler](http://www.railsonmaui.com/blog/2014/10/03/integrating-webpack-and-the-es6-transpiler-into-an-existing-rails-project/).\n\nThe gem project started with [Justin Gordon](https://github.com/justin808/) pairing with [Samnang Chhun](https://github.com/samnang) to figure out how to do server rendering with Webpack plus Rails. [Alex Fedoseev](https://github.com/alexfedoseev) then joined in. [Rob Wise](https://github.com/robwise), [Aaron Van Bokhoven](https://github.com/aaronvb), and [Andy Wang](https://github.com/yorzi) did the bulk of the generators. Many others have [contributed](https://github.com/shakacode/react_on_rails/graphs/contributors).\n\nWe owe much gratitude to the work of the [react-rails gem](https://github.com/reactjs/react-rails).\n\n# FINAL NOTES\n* See [Projects](PROJECTS.md) using and [KUDOS](./KUDOS.md) for React on Rails. Please submit yours! Please edit either page or [email us](mailto:contact@shakacode.com) and we'll add your info. We also **love stars** as it helps us attract new users and contributors.\n* Follow [@railsonmaui](https://twitter.com/railsonmaui) and [@shakacode](https://twitter.com/shakacode) on Twitter for updates on releases. We've also got a forum category dedicated to [react_on_rails](https://forum.shakacode.com/c/rails/reactonrails).\n* Please [Subscribe](https://app.mailerlite.com/webforms/landing/l1d9x5) to keep in touch with Justin Gordon and [ShakaCode](http://www.shakacode.com/). I intend to send a monthly summary including announcements of new releases of React on Rails and of our latest [blog articles](https://blog.shakacode.com) and tutorials. Subscribers will also have access to **exclusive content**, including tips and examples.\n\n[![2017-01-31_14-16-56](https://cloud.githubusercontent.com/assets/1118459/22490211/f7a70418-e7bf-11e6-9bef-b3ccd715dbf8.png)](https://app.mailerlite.com/webforms/landing/l1d9x5)\n\n---\n\nAloha from Justin Gordon ([bio](http://www.railsonmaui.com/about)) and the [ShakaCode](http://www.shakacode.com) Team! We're actively looking for new projects involving React, React-Native, and Rails. Please contact me at [justin@shakacode.com](mailto:justin@shakacode.com) if we could potentially help you in any way. Besides consulting on bigger projects, [ShakaCode](http://www.shakacode.com) is doing Skype plus Slack/Github based coaching for React on Rails. See our blog post [Can ShakaCode Help You?](https://blog.shakacode.com/can-shakacode-help-you-4a5b1e5a8a63#.jex6tg9w9) for more information.\n\nWe're offering a free half-hour project consultation, on anything from React on Rails to any aspect of web application development for both consumer and enterprise products. In addition to React.js and Rails, we're doing React-Native iOS and Android apps!\n\nWhether you have a new project or need help on an existing project, feel free to contact me directly at [justin@shakacode.com](mailto:justin@shakacode.com) and thanks in advance for any referrals!\n\nYour support keeps this project going.\n",
  "readmeFilename": "README.md",
  "_id": "react-on-rails@6.5.0",
  "dist": {
    "shasum": "759d2650eeddafe193c68becd878e7799ebc8c7c"
  },
  "_from": "react-on-rails@6.5.0",
  "_resolved": "https://registry.npmjs.org/react-on-rails/-/react-on-rails-6.5.0.tgz"
}
